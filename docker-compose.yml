services:
  # Hedging Bot (Direct SDK - No API servers needed!)
  hedging-bot:
    build: .
    platform: linux/amd64  # Force x86_64 for Lighter SDK compatibility
    container_name: hedging-bot
    command: python3 main.py
    env_file:
      - .env
    volumes:
      - ./bot:/app/bot
      - ./perpsdex:/app/perpsdex
      - ./main.py:/app/main.py
      - ./logs:/app/logs
    restart: unless-stopped
    networks:
      - trading-network
    healthcheck:
      test: ["CMD", "pgrep", "-f", "main.py"]
      interval: 60s
      timeout: 10s
      retries: 5
      start_period: 10s

networks:
  trading-network:
    driver: bridge

