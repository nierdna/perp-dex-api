openapi: 3.0.0
info:
  title: Hyperliquid Paper Trader API
  description: API for managing strategies and placing paper trades on Hyperliquid.
  version: 1.0.0
servers:
  - url: /api
    description: API Server

paths:
  /strategies:
    post:
      summary: Initialize a new Strategy Wallet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
                - capital
              properties:
                id:
                  type: string
                  example: "SWING_01"
                capital:
                  type: number
                  example: 1000
      responses:
        200:
          description: Strategy created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string

  /strategies/risk:
    post:
      summary: Update Strategy Risk Settings
      description: Update Max Daily Loss, Max Position Size, and Max Open Positions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: string
                  example: "SCALP_01"
                max_daily_loss:
                  type: number
                  description: Max daily loss percentage (e.g. 5 for 5% of current balance). 0 = disabled
                  example: 5
                max_position_size:
                  type: number
                  description: Max position size percentage (e.g. 10 for 10% of current balance per trade). 0 = disabled
                  example: 10
                max_open_positions:
                  type: integer
                  description: Max number of concurrent open positions. 0 = unlimited
                  example: 3
      responses:
        200:
          description: Settings updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /order:
    post:
      summary: Place a Paper Trade
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - strategyId
                - symbol
                - side
                - size
              properties:
                strategyId:
                  type: string
                  example: "SWING_01"
                symbol:
                  type: string
                  example: "BTC"
                side:
                  type: string
                  enum: [LONG, SHORT]
                  example: "LONG"
                size:
                  type: number
                  description: Position Size (Notional Value in USD)
                  example: 500
                sl:
                  type: number
                  description: Stop Loss Price
                  example: 95000
                tp:
                  type: number
                  description: Take Profit Price
                  example: 105000
      responses:
        200:
          description: Order placed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  position:
                    type: object

  /strategies/{id}:
    get:
      summary: Get Strategy Status & History
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number for trade history pagination
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of trades per page
      responses:
        200:
          description: Strategy Details
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  current_balance:
                    type: number
                  positions:
                    type: array
                    description: Active Positions
                    items:
                      type: object
                  recent_history:
                    type: array
                    description: Closed Positions History (paginated)
                    items:
                      type: object
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                      limit:
                        type: integer
                      total:
                        type: integer
                      totalPages:
                        type: integer

    get:
      summary: Get All Strategies
      responses:
        200:
          description: List of all strategies
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    initial_capital:
                      type: number
                    current_balance:
                      type: number
                    pnl:
                      type: string
                    roi:
                      type: string

  /position/close:
    post:
      summary: Manually Close a Position
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: string
                  example: "123"
      responses:
        200:
          description: Position closed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /position/update:
    post:
      summary: Update TP/SL for a Position
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: string
                  example: "123"
                tp:
                  type: number
                  description: Take Profit Price
                  example: 105000
                sl:
                  type: number
                  description: Stop Loss Price
                  example: 95000
      responses:
        200:
          description: Position updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  position:
                    type: object

  /position/close-all:
    post:
      summary: Close All Position for a Strategy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - strategyId
              properties:
                strategyId:
                  type: string
                  example: "SCALP_01"
      responses:
        200:
          description: All positions closed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  count:
                    type: integer

